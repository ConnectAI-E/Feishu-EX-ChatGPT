# Feishu-EX-ChatGPT


Feishu-EX-ChatGPT æ˜¯è®©é£ä¹¦æ¥å…¥ä¸€ä¸ªæ‹¥æœ‰å¢å¼ºç‰ˆæœ¬çš„ ChatGPT åŠŸèƒ½ã€‚
é€šè¿‡é›†æˆå„ç§æ’ä»¶ï¼ŒFeishu-EX-ChatGPT å¯ä»¥è®© ChatGPT æ›´å¥½åœ°ä¸å¤–éƒ¨æœåŠ¡è¿›è¡Œäº¤äº’ã€‚æ’ä»¶å¯ä»¥è½»æ¾æ‰©å±•ï¼Œå¹¶é€šè¿‡æ³¨å†Œæœºåˆ¶æ¥æ³¨å†Œå’Œæ¿€æ´»ã€‚æ­¤å¤–ï¼ŒFeishu-EX-ChatGPT æ’ä»¶ç³»ç»Ÿè¿˜æ”¯æŒç¬¬ä¸‰æ–¹æœåŠ¡çš„æ‰©å±•èƒ½åŠ›ã€‚âš¡

## åŠŸèƒ½ âœ¨

1. é€šè¿‡é›†æˆä¸åŒçš„æ’ä»¶æ¥å¢å¼º ChatGPT çš„å¤–éƒ¨èƒ½åŠ›ã€‚
2. æ’ä»¶å¯ä»¥è¿›è¡Œéšæ„æ‰©å±•ï¼Œå¹¶é€šè¿‡æ³¨å†Œæœºåˆ¶å®Œæˆæ’ä»¶çš„æ³¨å†Œä¸æ¿€æ´»ã€‚
3. åˆ©ç”¨æ’ä»¶æœºåˆ¶ï¼Œå®ç°å¯¹ç¬¬ä¸‰æ–¹æœåŠ¡çš„æ‰©å±•èƒ½åŠ›ã€‚

ä¸€èµ·è´¡çŒ®æ›´å¤šæ’ä»¶èƒ½åŠ›ï¼Œå¢å¼º FeishuEx æ‰©å±•èƒ½åŠ›ã€‚[github.com/agi-cn/llmplugin](https://github.com/agi-cn/llmplugin)


![](./images/plugins.png)

1. æ­£å¸¸æé—®ï¼Œä½¿ç”¨ ChatGPT å›ç­”ã€‚
2. ä»¥ `#` å¼€å¤´æé—®ï¼Œä½¿ç”¨æ’ä»¶è¿›è¡Œå›ç­”ã€‚


## å·¥ä½œæµç¨‹ ğŸŒŠ

![how_it_works](./images/how_it_works.png)

1. æ³¨å†Œæ’ä»¶åˆ—è¡¨ä»¥è·å–æ‰©å±•èƒ½åŠ›ã€‚ğŸ“
2. æ ¹æ®ç”¨æˆ·çš„æé—®ï¼Œé€‰æ‹©å¹¶æ¿€æ´»ç›¸åº”çš„æ’ä»¶ï¼ˆå¯èƒ½æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªï¼‰ã€‚ğŸ¯
3. ç­‰å¾…è·å–æ‰€æœ‰æ’ä»¶çš„ç»“æœï¼Œå¹¶æ±‡æ€»æ‰€æœ‰ç»“æœã€‚ğŸ”
4. å°†æ±‡æ€»åçš„ç»“æœè¿”å›ç»™ç”¨æˆ·ã€‚ğŸ”™


## å¦‚ä½•å¼€å§‹ ğŸ› ï¸

1. å…‹éš†æ­¤ä»“åº“åˆ°æœ¬åœ°ã€‚
2. åœ¨é¡¹ç›®ä¸­ï¼Œæ ¹æ®éœ€è¦åˆ›å»ºè‡ªå·±çš„æ’ä»¶å¹¶å®ç°ç›¸åº”çš„æ¥å£ã€‚
3. æ³¨å†Œå¹¶æ¿€æ´»æ’ä»¶ã€‚
4. å¼€å§‹ä½¿ç”¨ Feishu-EX-ChatGPT ä¸ ChatGPT è¿›è¡Œäº¤äº’ï¼ğŸ‰


ç°åœ¨å¼€å§‹ä½¿ç”¨ Feishu-EX-ChatGPTï¼Œè®©æ‚¨çš„é£ä¹¦æ¥å…¥çš„ ChatGPT æ‹¥æœ‰çš„åŠŸèƒ½æ›´å¼ºå¤§å§ï¼ğŸš€


## è¿è¡Œ

æ”¯æŒæœ¬åœ°è¿è¡Œï¼Œæˆ–è€…ä½¿ç”¨ fly.io è¿›è¡Œéƒ¨ç½²ã€‚

è¿è¡Œæ—¶ï¼Œä¾èµ–ç¯å¢ƒå˜é‡æ”¯æŒï¼Œç¯å¢ƒå˜é‡åŠ è½½å½¢å¼æœ‰ï¼š

1. è®¾ç½®ç³»ç»Ÿç¯å¢ƒå˜é‡
2. åŠ è½½ .env ç¯å¢ƒå˜é‡å®šä¹‰æ–‡ä»¶

å…·ä½“ç¯å¢ƒå˜é‡å‚è€ƒï¼š`./dotenv.example` æ–‡ä»¶è¯´æ˜ã€‚


### 1. æœ¬åœ°è¿è¡Œ

ä½¿ç”¨ .env ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼Œ

```bash
cp dotenv.example .env

go run ./cmd
```

### 2. é›†æˆ Stable Diffusion æ’ä»¶

![](./images/feishu-ex-sd.jpg)

### 2. æœç´¢æ’ä»¶æ”¯æŒ

æ”¯æŒæœç´¢å¼•æ“å¦‚ä¸‹ï¼Œ

1. agi.cn search æœç´¢æ’ä»¶ - å°è£…äº† duckduckgo æœç´¢èƒ½åŠ›ï¼Œä¸”ä¸éœ€è¦é¢å¤–ç”³è¯· tokenï¼Œé»˜è®¤é›†æˆã€‚
2. æ”¯æŒ Google Search æ’ä»¶èƒ½åŠ›ï¼ˆéœ€è¦ç”³è¯· Google Search Engine Tokenï¼‰ã€‚

<details>
    <summary>ç”³è¯· Google æœç´¢æ¥å£</summary>

1. è·å– [GOOGLE_ENGINE_ID](http://www.google.com/cse/)
2. å¼€é€š [GOOGLE_SEARCH_API](https://console.cloud.google.com/apis/api/customsearch.googleapis.com/metrics)
2. è·å– [GOOGLE_TOKEN](https://console.cloud.google.com/apis/credentials?pli=1&project=bobmac-344202)

[ä¸»è¦å‚è€ƒ](https://stackoverflow.com/questions/37083058/programmatically-searching-google-in-python-using-custom-search)

</details>

æ²¡æœ‰é…ç½® Google Search çš„ç¯å¢ƒå˜é‡ï¼Œåˆ™é»˜è®¤å¯åŠ¨ duckduckgo æœç´¢ã€‚


### 2. é£ä¹¦æé—®

1. æ²¡æœ‰æ”¯æŒ Plugin æ—¶ï¼Œæ•ˆæœå¦‚ä¸‹ï¼Œ

  ![](./images/answer_by_chatgpt.jpg)

2. æ”¯æŒ Plugin æ—¶ï¼Œæ•ˆæœï¼Œ

  ![](./images/answer_by_plugin.png)



## å¦‚ä½•è´¡çŒ®

1. ä»£ç ç»“æ„å‚è€ƒã€Œæ•´æ´æ¶æ„æ€æƒ³ã€ï¼Œå…·ä½“è¯´æ˜å‚è€ƒ [github.com/xpzouying/go-clean-arch](https://github.com/xpzouying/go-clean-arch)ã€‚
2. ç¼–ç è§„èŒƒå‚è€ƒ [Go Code Review](https://github.com/golang/go/wiki/CodeReviewComments)


## éƒ¨ç½²æœºå™¨äºº

### 1. éƒ¨ç½²é£ä¹¦æœºå™¨äººæœåŠ¡

å› ä¸ºé£ä¹¦éœ€è¦è®¿é—®å…¬ç½‘çš„ IP åœ°å€ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ [fly.io](https://fly.io/) è¿›è¡Œéƒ¨ç½²ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå…è´¹é¢åº¦éƒ½å¤Ÿç”¨ã€‚

<details>
    <summary>fly.io éƒ¨ç½²æµç¨‹</summary>

ä»¥ MacOS ä¸ºä¾‹ï¼Œå…¶ä»–çš„ç±»ä¼¼ã€‚

1. ç™»å½• [https://fly.io/dashboard](https://fly.io/dashboard) å¹¶æ³¨å†Œè´¦å·ã€‚

2. å®‰è£… [Fly CLI](https://fly.io/docs/getting-started/installing-flyctl/)ã€‚

3. è¿è¡Œå‘½ä»¤ç™»å½•ï¼Œ`flyctl auth login`ã€‚

  ```bash
  Waiting for session... Done
  successfully logged in as xpzouying@gmail.com
  ```

4. è¿è¡Œ `flyctl apps create`ï¼Œè¾“å…¥ app nameï¼š `feishuex-bot`ã€‚

5. ä½¿ç”¨ flyctl env é…ç½®å„ç§ç¯å¢ƒå˜é‡ã€‚
  * flyctl secrets set FEISHU_APP_ID=cli_xxx
  * flyctl secrets set FEISHU_APP_SECRET=abcABCxxx
  * flyctl secrets set VERIFY_TOKEN=abcABCxxx
  * flyctl secrets set ENCRYPT_KEY=abcABCxxx
  * flyctl secrets set BOT_NAME=feishu-bot
  * flyctl secrets set OPENAI_TOKEN=sk-xxx

  é…ç½®åï¼Œä½¿ç”¨ `flyctl secrets list` æŸ¥çœ‹ç¯å¢ƒå˜é‡è®¾ç½®ã€‚
  ![](./images/fly_env_list.jpg)

6. éƒ¨ç½²ç¨‹åºï¼š`flyctl deploy`ã€‚
  ![](./images/fly_deploy.png)


7. æŸ¥çœ‹çŠ¶æ€ï¼š

  * é€šè¿‡å‘½ä»¤è¡ŒæŸ¥çœ‹ï¼š`flyctl status`
    ![](./images/fly_status.png)

  * é€šè¿‡é¡µé¢æŸ¥çœ‹ [https://fly.io/dashboard/personal](https://fly.io/dashboard/personal)
    ![](./images/fly_dashboard.png)

</details>



### 2. é…ç½®é£ä¹¦æœºå™¨äºº

ä½¿ç”¨ fly.io æˆåŠŸéƒ¨ç½²åï¼Œå¯ä»¥åœ¨é£ä¹¦å¼€å‘å¹³å°é…ç½®è¯·æ±‚åœ°å€ã€‚

![](./images/feishu_bot_config.png)


## è”ç³»

æ¬¢è¿è®¨è®ºæ›´å¤šåŠŸèƒ½æ‰©å±•ï¼Œ

 <img src='https://github.com/ConnectAI-E/Feishu-EX-ChatGPT/assets/50035229/3a65502b-bfd5-4096-96d0-90ecc1b5d535' alt='' width='200'/>


## èµåŠ©æ„Ÿè°¢

å‹æƒ…æ„Ÿè°¢ 'Find My Ai' æä¾›çš„éƒ¨åˆ†ç»è´¹èµåŠ©ï¼


